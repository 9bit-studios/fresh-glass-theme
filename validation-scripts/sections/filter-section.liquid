{% comment %}
  Filter Section - Apple HIG Compliant
  Generated by Apple Intelligence Strategic Director
  Zero Tolerance: No inline CSS permitted
{% endcomment %}

<section 
  id="filter-section-{{ section.id }}" 
  class="filter-section"
  role="search"
  aria-label="Product Filters"
  data-apple-hig-compliant="true"
>
  <h3 class="filter-section__title">
    {{ section.settings.title | default: "Filter Products" }}
  </h3>
  
  <form 
    class="filter-form"
    method="get"
    action="{{ collection.url }}"
    role="search"
    aria-label="Filter products form"
  >
    <div class="filter-groups">
      <!-- Price Range Filter -->
      <div class="filter-group">
        <label for="price-range" class="filter-label">Price Range</label>
        <select 
          id="price-range" 
          name="price" 
          class="filter-select apple-hig-button"
          aria-describedby="price-help"
        >
          <option value="">All Prices</option>
          <option value="0-50" {% if request.params.price == '0-50' %}selected{% endif %}>Under $50</option>
          <option value="50-100" {% if request.params.price == '50-100' %}selected{% endif %}>$50 - $100</option>
          <option value="100-200" {% if request.params.price == '100-200' %}selected{% endif %}>$100 - $200</option>
          <option value="200+" {% if request.params.price == '200+' %}selected{% endif %}>$200+</option>
        </select>
        <div id="price-help" class="sr-only">Filter products by price range</div>
      </div>
      
      <!-- Game Type Filter -->
      <div class="filter-group">
        <label for="game-type" class="filter-label">Game Type</label>
        <select 
          id="game-type" 
          name="type" 
          class="filter-select apple-hig-button"
          aria-describedby="type-help"
        >
          <option value="">All Games</option>
          {% for tag in collection.all_tags %}
            {% if tag contains 'type-' %}
              {% assign tag_name = tag | remove: 'type-' | capitalize %}
              <option value="{{ tag }}" {% if collection.current_tags contains tag %}selected{% endif %}>
                {{ tag_name }}
              </option>
            {% endif %}
          {% endfor %}
        </select>
        <div id="type-help" class="sr-only">Filter products by game type</div>
      </div>
    </div>
    
    <div class="filter-actions">
      <button 
        type="submit" 
        class="apple-hig-button filter-apply"
        aria-label="Apply selected filters"
      >
        Apply Filters
      </button>
      
      {% if collection.current_tags.size > 0 %}
        <a 
          href="{{ collection.url }}" 
          class="apple-hig-button filter-clear"
          aria-label="Clear all active filters"
          role="button"
        >
          Clear All
        </a>
      {% endif %}
    </div>
  </form>
</section>

{% schema %}
{
  "name": "Product Filter",
  "class": "filter-section",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Filter Title",
      "default": "Filter Products"
    },
    {
      "type": "checkbox",
      "id": "enable_price_filter",
      "label": "Enable Price Filter",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "enable_type_filter", 
      "label": "Enable Game Type Filter",
      "default": true
    },
    {
      "type": "header",
      "content": "Apple HIG Compliance"
    },
    {
      "type": "paragraph",
      "content": "This component follows Apple Human Interface Guidelines with 44px minimum touch targets and proper accessibility."
    }
  ],
  "presets": [
    {
      "name": "Product Filter",
      "category": "Collection"
    }
  ]
}
{% endschema %}
