{% comment %}
  Main Navigation - Apple HIG Compliant
  Generated by Apple Intelligence Strategic Director
  Zero Tolerance: No inline CSS permitted
{% endcomment %}

<header 
  id="main-navigation-{{ section.id }}"
  class="main-navigation"
  role="banner"
  data-apple-hig-compliant="true"
>
  <nav 
    class="nav-container"
    role="navigation"
    aria-label="Main navigation"
  >
    <!-- Logo -->
    {% if section.settings.logo %}
      <a 
        href="{{ routes.root_url }}" 
        class="nav-logo"
        aria-label="Homepage"
      >
        <img 
          src="{{ section.settings.logo | img_url: '200x' }}"
          alt="{{ shop.name }}"
          height="40"
        >
      </a>
    {% else %}
      <a 
        href="{{ routes.root_url }}" 
        class="nav-logo nav-logo--text"
        aria-label="Homepage"
      >
        {{ shop.name }}
      </a>
    {% endif %}
    
    <!-- Main Menu Links -->
    <ul class="nav-menu" role="list">
      {% for link in linklists[section.settings.main_menu].links %}
        <li class="nav-item">
          <a 
            href="{{ link.url }}" 
            class="nav-link apple-hig-button"
            {% if link.active %}aria-current="page"{% endif %}
            aria-label="{{ link.title }}"
          >
            {{ link.title }}
          </a>
        </li>
      {% endfor %}
    </ul>
    
    <!-- Action Items -->
    <div class="nav-actions">
      {% if section.settings.show_search %}
        <button 
          class="nav-action apple-hig-button"
          type="button"
          aria-label="Search products"
          aria-expanded="false"
        >
          Search
        </button>
      {% endif %}
      
      {% if section.settings.show_account %}
        <a 
          href="{{ routes.account_url }}" 
          class="nav-action apple-hig-button"
          aria-label="Account"
        >
          Account
        </a>
      {% endif %}
      
      {% if section.settings.show_cart_count %}
        <a 
          href="{{ routes.cart_url }}" 
          class="nav-action apple-hig-button cart-link"
          aria-label="Shopping cart with {{ cart.item_count }} items"
        >
          Cart
          {% if cart.item_count > 0 %}
            <span class="cart-count" aria-hidden="true">{{ cart.item_count }}</span>
          {% endif %}
        </a>
      {% endif %}
    </div>
  </nav>
</header>

{% schema %}
{
  "name": "Navigation",
  "class": "main-navigation",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo Image"
    },
    {
      "type": "link_list",
      "id": "main_menu",
      "label": "Main Menu",
      "default": "main-menu"
    },
    {
      "type": "checkbox",
      "id": "show_search",
      "label": "Show Search",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_account",
      "label": "Show Account Link",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_cart_count",
      "label": "Show Cart Count",
      "default": true
    },
    {
      "type": "header",
      "content": "Apple HIG Compliance"
    },
    {
      "type": "paragraph",
      "content": "Navigation follows Apple HIG with 44px minimum touch targets and proper accessibility."
    }
  ],
  "presets": [
    {
      "name": "Navigation",
      "category": "Header"
    }
  ]
}
{% endschema %}
