/**
 * Global Glass Theme - Petersen Games
 * Inspired by Apple's SwiftUI Liquid Glass
 * Version: 1.0.0
 * 
 * This implements glassmorphic effects for Shopify Liquid themes
 * based on Apple's design principles
 */

/* ========================================
   CSS Custom Properties (Design Tokens)
   ======================================== */
:root {
  /* Glass Effect Variables - Based on SwiftUI Constants */
  --glass-blur-regular: 20px;
  --glass-blur-prominent: 40px;
  --glass-blur-subtle: 10px;
  
  /* Glass Opacity Levels */
  --glass-opacity-regular: 0.8;
  --glass-opacity-prominent: 0.9;
  --glass-opacity-subtle: 0.6;
  --glass-opacity-ultra-thin: 0.3;
  
  /* Glass Background Colors */
  --glass-background-light: rgba(255, 255, 255, var(--glass-opacity-subtle));
  --glass-background-dark: rgba(0, 0, 0, var(--glass-opacity-subtle));
  --glass-background-tint: rgba(255, 255, 255, 0.1);
  
  /* Border and Shadow */
  --glass-border-color: rgba(255, 255, 255, 0.2);
  --glass-shadow-color: rgba(0, 0, 0, 0.1);
  --glass-inner-shadow: inset 0 1px 0 0 rgba(255, 255, 255, 0.2);
  
  /* Spacing - From SwiftUI Constants */
  --glass-spacing: 16px; /* badgeGlassSpacing */
  --glass-corner-radius: 24px; /* badgeCornerRadius */
  --glass-padding: 14px; /* standardPadding */
  
  /* Animation */
  --glass-transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  --glass-hover-scale: 1.02;
}

/* Dark mode adjustments */
@media (prefers-color-scheme: dark) {
  :root {
    --glass-background-light: rgba(255, 255, 255, 0.1);
    --glass-background-dark: rgba(0, 0, 0, var(--glass-opacity-regular));
    --glass-border-color: rgba(255, 255, 255, 0.1);
    --glass-shadow-color: rgba(0, 0, 0, 0.3);
  }
}

/* ========================================
   Base Glass Effect Classes
   ======================================== */

/* Regular Glass Effect - Like SwiftUI .glassEffect(.regular) */
.glass-effect,
.quantum-spatial-glass-regular {
  background: var(--glass-background-light);
  backdrop-filter: blur(var(--glass-blur-regular));
  -webkit-backdrop-filter: blur(var(--glass-blur-regular));
  border: 1px solid var(--glass-border-color);
  border-radius: var(--glass-corner-radius);
  box-shadow: 
    0 8px 32px 0 var(--glass-shadow-color),
    var(--glass-inner-shadow);
  transition: var(--glass-transition);
  overflow: hidden;
  position: relative;
}

/* Prominent Glass Effect */
.glass-effect-prominent,
.quantum-spatial-glass-prominent {
  background: var(--glass-background-light);
  backdrop-filter: blur(var(--glass-blur-prominent)) saturate(180%);
  -webkit-backdrop-filter: blur(var(--glass-blur-prominent)) saturate(180%);
  border: 1px solid var(--glass-border-color);
  border-radius: var(--glass-corner-radius);
  box-shadow: 
    0 16px 48px 0 var(--glass-shadow-color),
    var(--glass-inner-shadow);
}

/* Subtle Glass Effect */
.glass-effect-subtle,
.quantum-spatial-glass-subtle {
  background: var(--glass-background-light);
  backdrop-filter: blur(var(--glass-blur-subtle));
  -webkit-backdrop-filter: blur(var(--glass-blur-subtle));
  border: 1px solid var(--glass-border-color);
  border-radius: calc(var(--glass-corner-radius) / 2);
  box-shadow: 
    0 4px 16px 0 var(--glass-shadow-color),
    var(--glass-inner-shadow);
}

/* Ultra Thin Material - Like iOS */
.glass-effect-ultra-thin {
  background: rgba(255, 255, 255, var(--glass-opacity-ultra-thin));
  backdrop-filter: blur(var(--glass-blur-subtle));
  -webkit-backdrop-filter: blur(var(--glass-blur-subtle));
  border: none;
  box-shadow: 0 2px 8px 0 var(--glass-shadow-color);
}

/* ========================================
   Glass Container - Like GlassEffectContainer
   ======================================== */
.glass-container,
.quantum-spatial-glass-container {
  display: flex;
  flex-direction: column;
  gap: var(--glass-spacing);
  padding: var(--glass-padding);
  position: relative;
  isolation: isolate;
}

/* Glass container with background */
.glass-container-with-bg {
  background: var(--glass-background-light);
  backdrop-filter: blur(var(--glass-blur-regular));
  -webkit-backdrop-filter: blur(var(--glass-blur-regular));
  border: 1px solid var(--glass-border-color);
  border-radius: var(--glass-corner-radius);
  box-shadow: 
    0 8px 32px 0 var(--glass-shadow-color),
    var(--glass-inner-shadow);
}

/* ========================================
   Glass Button Style - Like .buttonStyle(.glass)
   ======================================== */
.glass-button,
.quantum-spatial-button-glass {
  background: var(--glass-background-light);
  backdrop-filter: blur(var(--glass-blur-regular));
  -webkit-backdrop-filter: blur(var(--glass-blur-regular));
  border: 1px solid var(--glass-border-color);
  border-radius: 12px;
  padding: 12px 24px;
  font-weight: 500;
  color: inherit;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  min-height: 44px; /* Apple HIG touch target */
  box-shadow: 
    0 4px 16px 0 var(--glass-shadow-color),
    var(--glass-inner-shadow);
  transition: var(--glass-transition);
  cursor: pointer;
  position: relative;
  overflow: hidden;
}

.glass-button:hover {
  transform: scale(var(--glass-hover-scale));
  box-shadow: 
    0 8px 24px 0 var(--glass-shadow-color),
    var(--glass-inner-shadow);
}

.glass-button:active {
  transform: scale(0.98);
}

/* Glass button variants */
.glass-button-prominent {
  backdrop-filter: blur(var(--glass-blur-prominent)) saturate(180%);
  -webkit-backdrop-filter: blur(var(--glass-blur-prominent)) saturate(180%);
  background: var(--glass-background-light);
}

.glass-button-subtle {
  backdrop-filter: blur(var(--glass-blur-subtle));
  -webkit-backdrop-filter: blur(var(--glass-blur-subtle));
  background: rgba(255, 255, 255, 0.3);
  border-color: rgba(255, 255, 255, 0.1);
}

/* ========================================
   Glass Card Components
   ======================================== */
.glass-card {
  background: var(--glass-background-light);
  backdrop-filter: blur(var(--glass-blur-regular));
  -webkit-backdrop-filter: blur(var(--glass-blur-regular));
  border: 1px solid var(--glass-border-color);
  border-radius: var(--glass-corner-radius);
  padding: var(--glass-padding);
  box-shadow: 
    0 8px 32px 0 var(--glass-shadow-color),
    var(--glass-inner-shadow);
  transition: var(--glass-transition);
}

.glass-card:hover {
  transform: translateY(-2px);
  box-shadow: 
    0 12px 40px 0 var(--glass-shadow-color),
    var(--glass-inner-shadow);
}

/* ========================================
   Product Card Glass Effects
   ======================================== */
.product-card-glass {
  position: relative;
  overflow: hidden;
  border-radius: var(--glass-corner-radius);
}

.product-card-glass .card__content {
  background: var(--glass-background-light);
  backdrop-filter: blur(var(--glass-blur-regular));
  -webkit-backdrop-filter: blur(var(--glass-blur-regular));
  border: 1px solid var(--glass-border-color);
  border-radius: 0 0 var(--glass-corner-radius) var(--glass-corner-radius);
  padding: var(--glass-padding);
}

.product-card-glass .card__badge {
  background: var(--glass-background-light);
  backdrop-filter: blur(var(--glass-blur-prominent));
  -webkit-backdrop-filter: blur(var(--glass-blur-prominent));
  border: 1px solid var(--glass-border-color);
  padding: 4px 12px;
  border-radius: 999px;
}

/* ========================================
   Navigation Glass Effects
   ======================================== */
.header-glass,
.quantum-spatial-header-glass {
  background: var(--glass-background-light);
  backdrop-filter: blur(var(--glass-blur-regular));
  -webkit-backdrop-filter: blur(var(--glass-blur-regular));
  border-bottom: 1px solid var(--glass-border-color);
  position: sticky;
  top: 0;
  z-index: 100;
  transition: var(--glass-transition);
}

/* Sticky header becomes more prominent when scrolled */
.header-glass.scrolled {
  backdrop-filter: blur(var(--glass-blur-prominent)) saturate(180%);
  -webkit-backdrop-filter: blur(var(--glass-blur-prominent)) saturate(180%);
  box-shadow: 0 4px 24px 0 var(--glass-shadow-color);
}

/* ========================================
   Form Elements with Glass
   ======================================== */
.glass-input,
.glass-select {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(var(--glass-blur-subtle));
  -webkit-backdrop-filter: blur(var(--glass-blur-subtle));
  border: 1px solid var(--glass-border-color);
  border-radius: 8px;
  padding: 12px 16px;
  color: inherit;
  transition: var(--glass-transition);
}

.glass-input:focus,
.glass-select:focus {
  outline: none;
  border-color: rgba(255, 255, 255, 0.4);
  background: rgba(255, 255, 255, 0.15);
  box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.1);
}

/* ========================================
   Modal/Drawer Glass Effects
   ======================================== */
.glass-modal-backdrop {
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
}

.glass-modal-content,
.glass-drawer {
  background: var(--glass-background-light);
  backdrop-filter: blur(var(--glass-blur-prominent)) saturate(180%);
  -webkit-backdrop-filter: blur(var(--glass-blur-prominent)) saturate(180%);
  border: 1px solid var(--glass-border-color);
  border-radius: var(--glass-corner-radius);
  box-shadow: 
    0 24px 64px 0 rgba(0, 0, 0, 0.2),
    var(--glass-inner-shadow);
}

/* ========================================
   Utility Classes
   ======================================== */

/* Remove glass on small screens if needed */
@media (max-width: 768px) {
  .glass-mobile-opaque {
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    background: rgba(255, 255, 255, 0.95) !important;
  }
}

/* Performance optimization for older devices */
@media (prefers-reduced-motion: reduce) {
  .glass-effect,
  .glass-button,
  .glass-card {
    transition: none;
  }
}

/* Fallback for browsers without backdrop-filter support */
@supports not (backdrop-filter: blur(1px)) {
  .glass-effect,
  .glass-button,
  .glass-card,
  .glass-container-with-bg {
    background: rgba(255, 255, 255, 0.95);
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.08);
  }
}

/* ========================================
   Animation Classes
   ======================================== */
@keyframes glass-shimmer {
  0% {
    background-position: -200% center;
  }
  100% {
    background-position: 200% center;
  }
}

.glass-shimmer {
  background-image: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.2),
    transparent
  );
  background-size: 200% 100%;
  animation: glass-shimmer 2s infinite;
}

/* ========================================
   Integration with QuantumSpatial
   ======================================== */
.quantum-spatial-glass-integration {
  /* Combines QuantumSpatial design tokens with glass effects */
  background: var(--quantum-spatial-glass-surface, var(--glass-background-light));
  backdrop-filter: blur(var(--quantum-spatial-blur-amount, var(--glass-blur-regular)));
  -webkit-backdrop-filter: blur(var(--quantum-spatial-blur-amount, var(--glass-blur-regular)));
  border-radius: var(--quantum-spatial-radius-large, var(--glass-corner-radius));
}